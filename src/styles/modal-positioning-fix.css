/* ðŸŽ¯ CRITICAL MODAL POSITIONING FIX - Global Enhancement
 * 
 * Problem: Modal overlays were appearing relative to dashboard container instead of viewport
 * Root Cause: Transform animations on parent containers create new stacking contexts,
 *            causing position:fixed to be relative to the transformed element instead of viewport
 * 
 * Solution: Force all modal overlays to be absolutely positioned relative to viewport
 *          with explicit overrides to prevent transform containment issues
 */

/* ðŸ”§ UNIVERSAL MODAL OVERLAY FIX - Applies to all modal overlays globally */
.popup-overlay,
.modal-overlay,
.chat-modal-overlay,
.insights-modal-overlay,
.access-control-overlay,
.upgrade-popup-overlay,
.messages-popup-overlay,
.profile-popup-overlay,
.admin-overlay,
.admin-login-overlay {
  /* ðŸŽ¯ ABSOLUTE VIEWPORT POSITIONING */
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  width: 100vw !important;
  height: 100vh !important;
  
  /* ðŸŽ¯ CENTERING & LAYOUT */
  display: flex !important;
  justify-content: center !important;
  align-items: center !important;
  padding: 20px !important;
  margin: 0 !important;
  box-sizing: border-box !important;
  
  /* ðŸŽ¯ STACKING & VISIBILITY */
  z-index: 99999 !important;
  
  /* ðŸ”§ CRITICAL TRANSFORM CONTAINMENT FIX */
  /* These properties prevent parent transforms from affecting modal positioning */
  transform: none !important;
  contain: none !important;
  isolation: auto !important;
  will-change: auto !important;
  
  /* ðŸŽ¯ SCROLLING & OVERFLOW */
  overflow-y: auto !important;
  -webkit-overflow-scrolling: touch !important;
}

/* ðŸ”§ EMERGENCY OVERRIDE - Force remove any conflicting transforms */
.dashboard-wrapper .popup-overlay,
.dashboard-wrapper .modal-overlay,
.modules-container .popup-overlay,
.modules-container .modal-overlay,
[data-motion-component] .popup-overlay,
[data-motion-component] .modal-overlay,
div[style*="transform"] .popup-overlay,
div[style*="transform"] .modal-overlay {
  transform: none !important;
  transform-origin: initial !important;
  transform-style: flat !important;
  /* ðŸ”§ FORCE VIEWPORT POSITIONING */
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  width: 100vw !important;
  height: 100vh !important;
  z-index: 99999 !important;
}

/* ðŸŽ¯ RESPONSIVE BREAKPOINTS - Ensure consistent behavior across devices */
@media (max-width: 768px) {
  .popup-overlay,
  .modal-overlay,
  .chat-modal-overlay,
  .insights-modal-overlay,
  .access-control-overlay,
  .upgrade-popup-overlay,
  .messages-popup-overlay,
  .profile-popup-overlay {
    padding: 10px !important;
  }
}

@media (max-width: 480px) {
  .popup-overlay,
  .modal-overlay,
  .chat-modal-overlay,
  .insights-modal-overlay,
  .access-control-overlay,
  .upgrade-popup-overlay,
  .messages-popup-overlay,
  .profile-popup-overlay {
    padding: 5px !important;
  }
}

/* ðŸ”§ HIGH DPI SCREEN FIX - Prevent additional transform issues */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  .popup-overlay,
  .modal-overlay,
  .chat-modal-overlay,
  .insights-modal-overlay,
  .access-control-overlay,
  .upgrade-popup-overlay,
  .messages-popup-overlay,
  .profile-popup-overlay {
    transform: none !important;
    will-change: auto !important;
    backface-visibility: visible !important;
  }
}

/* ðŸŽ¯ PRINT MEDIA FIX - Ensure modals display correctly when printing */
@media print {
  .popup-overlay,
  .modal-overlay,
  .chat-modal-overlay,
  .insights-modal-overlay,
  .access-control-overlay,
  .upgrade-popup-overlay,
  .messages-popup-overlay,
  .profile-popup-overlay {
    position: relative !important;
    background: none !important;
    backdrop-filter: none !important;
    transform: none !important;
  }
}

/* ðŸŽ¯ ACCESSIBILITY - Reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
  .popup-overlay,
  .modal-overlay,
  .chat-modal-overlay,
  .insights-modal-overlay,
  .access-control-overlay,
  .upgrade-popup-overlay,
  .messages-popup-overlay,
  .profile-popup-overlay {
    animation: none !important;
    transition: none !important;
    transform: none !important;
  }
}

/* ðŸ”§ DEBUGGING HELPER - Temporary visual indicator for modal positioning (remove in production) */
/*
.popup-overlay::before,
.modal-overlay::before {
  content: "MODAL FIXED";
  position: absolute;
  top: 10px;
  right: 10px;
  background: #ff0000;
  color: white;
  padding: 2px 6px;
  font-size: 10px;
  z-index: 100000;
  border-radius: 2px;
}
*/
